<!DOCTYPE HTML>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS -->
    <link rel="stylesheet" href="./css/fontfaces.css" />
    <link rel="stylesheet" href="./css/codemirror.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/neat.css" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css">-->
    <!-- /CSS -->

    <!-- FAVICONS -->
    <link rel="apple-touch-icon" sizes="180x180" href="./img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="./img/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="./img/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="./img/favicons/manifest.json">
    <link rel="mask-icon" href="./img/favicons/safari-pinned-tab.svg" color="#2E1D47">
    <meta name="theme-color" content="#ffffff">
    <!-- /FAVICONS -->

    <title>Meurtre et myst√®re √† SQL City</title>

    <script src="https://unpkg.com/@webcomponents/custom-elements@1.2.0/custom-elements.min.js"></script>
    <script src="./scripts/codemirror.js"></script>
    <script src="./scripts/codemirrorsql.js"></script>
    <script src="./scripts/autorefresh.js"></script>
    <script src="./scripts/main.js"></script>
    <script>
        window.onload = () => loadData('sql-murder-mystery.db');
    </script>
</head>
<body>
    
    <header>
        <h1>
            Meurtre et myst√®re √† SQL City
        </h1>
        <h2 class="subtitle">R√©ussiras-tu √† r√©soudre l'enqu√™te ?</h2>
    </header>

    <main>

        <div class="grid-item">
            <p>Nous pr√©sentons ici la <a href="#blabla">structuration et gestion de l'information</a> avec les bases de donn√©es, puis nous expliquons les <a href="#practice">commandes SQL</a> que tu dois conna√Ætre. D√®s que tu es pr√™t, tu pourras adapter les exemples pour cr√©er tes propres commandes SQL √† la recherche d'indices.</p>
        </div>
        <div>
            <div class="grid-item">

                <h2 id="blabla">Structuration de l'information</h2>

                <h3>Qu'est-ce qu'une base de donn√©es ?</h3>
                <dl>
                    <dt>Base de donn√©es</dt>
                    <dd>Une base de donn√©es est <b>une collection organis√©e de donn√©es</b> con√ßue pour g√©rer des donn√©es en grandes quantit√©s, complexes ou interconnect√©es. Elle √©vite donc autant que possible les <span title="r√©p√©titions">redondances</span> d'informations.</dd>
                </dl>
                <p>Il existe <b>2 grandes familles de mod√®les</b> de bases de donn√©es :<ul>
                        <li>Le <b>mod√®le relationnel</b>, qui utilise des <span title="souvent repr√©sent√©s par des tableaux">ensembles de donn√©es</span> reli√©s entre eux.</li>
                        <li>Le <b><abbr title="Not Only SQL">NoSQL</b></abbr> qui regroupe diff√©rents formats pour stocker des donn√©es : documents, paires clef-valeur, graphes, etc. <span title="JSON est un format largement utilis√© pour repr√©senter des donn√©es structur√©es en NoSQL">üîç</span></li>
                    </ul>
                </p>

                <h3>Qu'est-ce qu'une base de donn√©es relationnelle ?</h3>
                <p>Le mod√®le relationnel a √©t√© d√©velopp√© par <b>Edgar F. Codd</b> en 1960 et formalis√© dans les ann√©es 1970. </p>
                <p>Une base de donn√©e relationnelle se repr√©sente g√©n√©ralement sous forme de tableaux reli√©s entre eux. Ces tableaux ressemblent beaucoup √† des feuilles de calcul, mais ils sont appel√©s <b>tables</b> ou <b>relation</b>. </p>
                <p>Le terme ¬´ relation ¬ª vient de la th√©orie des ensembles et d√©signe une association entre des √©l√©ments de deux ensembles. Dans le mod√®le relationnel, <b>l'organisation logique et l'organisation physique des donn√©es</b> sont ind√©pendants. </p>
                <dl>
                    <dt>Base de donn√©e relationnelle</dt>
                    <dd>Une <b>base de donn√©e relationnelle</b> est d√©finie par son <b>sch√©ma relationnel</b>. Le sch√©ma relationnel est cr√©√© par le concepteur de la base de donn√©es. Il indique la liste des <span title="table √† deux dimensions">relations ou entit√©s</span>, et pour chacune d'elles : 
                    <ul>
                        <li>son <b>nom</b>,</li>
                        <li>la <b>liste des <span title="les colonnes de la table">attributs</span></b> (qu'elle met en relation), c'est-√†-dire :
                            <ul>
                                <li>un <b>nom</b> pour l'attribut</li>
                                <li>le <b>domaine</b> de valeurs des donn√©es qui sont stock√©es dans cette colonne</li>
                            </ul>
                        </li>
                        <li>le statut de <b><a href="#primary-key">clef primaire</a></b> d'un ou plusieurs attributs,</li>
                        <li>et <i>√©ventuellement</i> le statut de <b><a href="#foreign-key">clef √©trang√®re</a></b> d'un attribut. </li>
                    </ul>            
                    </dd>
                </dl> 
                <figure>
                    <img src="img/relationEleves.png">
                    <figcaption>Extrait de donn√©es d'une relation "Eleves".</figcaption>
                </figure>
                <dl>
                    <dt id="primary-key">Clef primaire</dt>
                    <dd>Une <b>clef primaire</b> est un ou plusieurs attributs (colonnes) d'une relation (table) qui permettent d'identifier de mani√®re unique chaque enregistrement (ligne) de cette relation (table).</dd>
                </dl>
                <p>Toute relation doit avoir une clef primaire.</p>
                <p>Dans l'exemple ci-dessus l'attribut <code>eleve_id</code> peut √™tre choisi comme clef primaire s'il est unique pour chaque enregistrement. Ce n'est pas le cas de l'attribut <code>nom</code>, car on peut trouver deux √©l√®ves avec le m√™me nom ; m√™me chose pour les autres attributs. Le triplet <code>(nom, prenom, rue)</code> pourrait √©ventuellement servir de clef. Dans tous les cas, pour avoir la clef primaire d'une relation, il est classique d'ajouter √† cette relation un attribut nomm√© <code>id</code> (ou un autre terme contenant ce raccourci de ¬´ identifiant ¬ª). Cet attribut est g√©n√©ralement un entier (<code>INTEGER</code>) non nul qui est autoincr√©ment√© (par le <a href="#SGBD">Syst√®me de Gestion de Bases de Donn√©es</a>) √† chaque insertion d'un nouvel enregistrement. Vraiment pratique !</p>
                <dl>
                    <dt id="foreign-key">Clef √©trang√®re</dt>
                    <dd>Une <b>clef √©trang√®re</b> est un attribut (colonne) dans une relation (table) qui ne repr√©sente pas directement une donn√©e, mais qui sert de r√©f√©rence √† une autre relation. </dl>
                    <p>Il n'y a pas toujours de clef √©trange dans une relation. </p>
                </dl>
                <p>Pour comprendre l'int√©r√™t de ce syst√®me de les clefs primaires et √©trang√®res, reprenons l'exemple de la relation <code>Eleves</code> plus haut, et imaginons qu'on veuille ajouter des informations √† propos de leur classe (nom de classe, niveau).<br>
                Dans une approche tabulaire, on ajouterait les attributs <code>classe</code> (VARCHAR), <code>niveau</code> (VARCHAR). Le probl√®me, c'est que pour modifier le nom d'une classe, il faudrait modifier tous les enregistrements des √©l√®ves de cette classe. <br>
                L'approche relationnelle √©vite cela, en √©vitant autant que possible la redondance d'informations. Dans cette approche, on pr√©f√®re cr√©er une nouvelle relation <code>Classes</code> rassemblant les attributs <code>nom</code> (VARCHAR), <code>niveau</code> (VARCHAR) et un attribut <code>id</code> (INTEGER) pour identifier chaque classe. Ainsi, il suffirait d'ajouter un l'attribut <code>classe_id</code> dans la relation <code>Eleves</code> pour y stocker les valeurs de l'identifiant <code>id</code> correspondant √† la classe de l'√©l√®ve. Ainsi, si on veut modifier le nom de la classe, il suffit de modifier une seule fois cette donn√©e situ√©e dans la relation <code>Classes</code>. Dans la relation <code>Eleves</code>, l'attribut <code>classe_id</code> est qualifi√© de ¬´ clef √©trang√®re ¬ª.</p>
                <dl>
                    <dt id="arite">Ordre, degr√© ou arit√©</dt>
                    <dd>On appelle ¬´ ordre ¬ª, ¬´ degr√© ¬ª ou ¬´ arit√© ¬ª le <b>nombre d'attributs</b> d'une relation.</dd>
                    <p>C'est le nombre de colonnes d'un tableau de donn√©es.</p>
                    <dt id="tuple">n-uplet tuple ou enregistrement</dt>
                    <dd>On appelle ¬´ n-uplet ¬ª, ¬´ tuple ¬ª ou ¬´ enregistrement ¬ª d'une relation un <b>ensemble de valeurs ordonn√©es correspondant aux attributs</b> de cette relation.</dd>
                    <p>C'est une ligne individuelle de donn√©es d'un tableau de donn√©es.</p>
                    <dt id="cardinalite">Cardinalit√©</dt>
                    <dd>On appelle cardinalit√© le <b>nombre de n-uplets</b> d'une relation.</dd>
                    <p>C'est le nombre de lignes d'un tableau de donn√©es.</p>
                </dl> 
                <p>Th√©oriquement, dans un mod√®le ensembliste, les valeurs des attributs sont toujours d√©finies et uniques. En pratique, on peut trouver des valeurs non d√©finies (dont la valeur est <code>NULL</code> en SQL) ou des valeurs qui se r√©p√®tent (deux fois ou plus). </p>

                <h3 id="der">Repr√©sentation d'une base de donn√©es</h3>
                <p>Au premier abord, les bases de donn√©es peuvent impressionner. En effet, elles contiennent souvent de nombreuses relations, et chaque relation contient de nombreuses donn√©es. </p>
                <p>Pour avoir une id√©e claire des relations entre les donn√©es, on utilise une repr√©sentation visuelle appel√©e <b>diagramme entit√©-relation</b>.</p>
                <dl>
                    <dt>Diagramme entit√©-relation</dt>
                    <dd>Un diagramme entit√©-relation est une <b>repr√©sentation visuelle du sch√©ma relationnel</b> d'une base de donn√©es sous forme de tableaux reli√©s entre eux.</dd>
                </dl> 
                <figure>
                    <table class="sqltable">
                        <tr>
                            <th colspan="2">Eleves</th>
                        </tr>
                        <tr>
                            <td><b><u>eleve_id</u></b></td>
                            <td>INTEGER</td>
                        </tr>
                        <tr>
                            <td>nom</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>prenom</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>rue</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>ville</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>code_postal</td>
                            <td>TEXT</td>
                        </tr>
                    </table>
                    <figcaption>Le tableau qui pourrait repr√©senter la relation <code>Eleves</code> dans un diagramme entit√©-relation.</figcaption>
                </figure>
                <p>Dans un diagramme entit√©-relation :<ul> 
                    <li>Chaque <b>relation</b> est repr√©sent√©e par un <b>tableau</b>. Et dans chaque tableau, on a : 
                    </li>
                        <li>Le <b>nom de la relation</b>, √©crit tout en haut et g√©n√©ralement  en gras.</li>
                        <li>La <b>liste des attributs</b> dans le corps de la bo√Æte, avec leur <b>nom</b> et le <b>domaine</b> des valeurs. </li>
                        <li>Les <b>liens entre les attributs de diff√©rentes relations</b> sont repr√©sent√©s par des fl√®ches allant d'une clef √©trang√®re d'un tableau vers la primaire d'un autre tableau.<br>
                        De plus, ces liens peuvent √™tre avoir un nom pour d√©crire  (p. ex., "a jou√© dans", "donne une note √†").
                            <ul>
                                <li>Les attributs servant de <b>clefs primaires</b> sont identifi√©s par un symbole (p. ex., üîë, ‚òÖ, <abbr title="Clef Primaire">CP</abbr>, <abbr title="Primary Key">PK</abbr>) ou par un style particulier (p. ex., gras ou soulign√©).</li>
                                <li>Les attributs servant de  <b>clefs √©trang√®res</b> peuvent aussi √™tre identifi√©s par un symbole (p. ex., ‚öø, ‚òÜ, ‚Üó, <abbr title="Foreign Key">PF</abbr>) ou par un style particulier (p. ex., italique).</li>
                            </ul> 
                        </li>
                    </ul>
                </p>  
            </div>
        </div>

        <div>
            <div class="grid-item">

                <h2 id="SQL">Communication avec une base de donn√©es</h2>

                <h3>Des requ√™tes pour interroger une base de donn√©es </h3>
                <p>Pensons √† toutes les donn√©es stock√©es par des g√©ants du num√©rique comme Amazon (produits et clients) ou Facebook (avec tous les comptes, tous les contenus textes, photos, vid√©os, ... depuis toutes ces ann√©es). Tout cela est stock√© dans des bases de donn√©es relationnelles ; des bases tellement √©normes qu'il est impossible de parcourir tous les tableaux ligne par ligne pour trouver des informations. Heureusement, il y a les <b>requ√™tes</b> !</p> 
                <dl>
                    <dt>Requ√™te</dt>
                    <dd>Une requ√™te est une <b>commande</b> qui permet de s√©lectionner, d'ajouter, de modifier ou de supprimer des donn√©es.</dd>
                </dl>
                <h3>Qu'est-ce que SQL ?</h3>
                <dl>
                    <dt>SQL</dt>
                    <dd>SQL est un <b>langage d√©claratif con√ßu pour √©crire des requ√™tes</b> aux bases de donn√©es relationnelles.</dd>
                </dl>
                <p>
                <ul>
                    <li>SQL est l'acronyme de <b><i>Structured Query Language</i></b> que l'on peut traduire par <b>Langage de requ√™te structur√©e</b>.</li>
                    <li>C'est un langage informatique <b>d√©claratif</b>, c'est-√†-dire qu'il permet de d√©crire le r√©sultat souhait√©, sans d√©crire la mani√®re de l'obtenir. <span>HTML et Latex sont des exemples de langages d√©claratifs, contrairement √† Python ou C++.</span>üîç</li>
                    <li>SQL est propre aux bases de donn√©es relationnelles. Les autres types de bases de donn√©es utilisent d'autres langages pour effectuer des requ√™tes.</li>
                </ul>
                </p>
                <h4>Quelques ressources  sur le web</h4>
                <p>Si tu as besoin d'apprendre le SQL, voici quelques liens vers des sites web :
                     <ul>
                        <li>des <a href="https://sql.sh/cours" target="_blank">fiches de cours</a> et  quelques <a href="https://sql.sh/exercices-sql/" target="_blank">exercices</a> sur le site sql.sh</li>
                        <li><a href="http://webtic.free.fr/sql/index.htm" target="_blank">des cours tr√®s complets et des exercices</a></li>
                        <li><a href="https://fxjollois.github.io/cours-sql/" target="_blank">un site pour s'entra√Æner</a></li>
                        <li><a href="http://deptfod.cnam.fr/bd/tp" target="_blank">des TP du CNAM</a></li>
                        <li><a href="https://colibri.unistra.fr/fr/course/list/notions-de-base-en-sql">des exercices d'un projet libre de l'universit√© de Strasbourg</a></li>
                    </ul>
                </p> 

                <h3>Et SQLite ?</h3>
                <p>SQLite est un Syst√®me de Gestion de Bases de Donn√©es Relationnelle tr√®s r√©pandu. Il en existe d'autres, tels que MySQL, PostgreSQL ou MariaDB. Dans tous les cas, le langage utilis√© est le SQL (avec quelques l√©g√®res diff√©rences selon les syst√®mes).</p>
                <p><a href="https://db-engines.com/en/ranking" target="_blank">Top mondial des SGBD (üá¨üáß)</a></p> 
            </div>
        </div>

        <div>
            <div class="grid-item">
                <h2>La gestion des donn√©es</h2>

                <h3 id="SGBD">Syst√®me de Gestion de Bases de Donn√©es</h3>
                <dl>
                    <dt>Syst√®me de Gestion de Bases de Donn√©es (ou SGBD)</dt>
                    <dd>Un Syst√®me de Gestion de Bases de Donn√©es (ou SGBD) est un <b>logiciel</b> permettant √† un ou plusieurs utilisateurs d'effectuer de mani√®re efficace des op√©rations sur une grande quantit√© d'informations stock√©es sur des m√©moires partag√©es (que la base soit relationnelle ou non).</dd>
                </dl>
                <p>Le concepteur d√©finit la structure, et le SGBD g√®re le reste, √† savoir : 
                    <ul>
                        <li>la disponibilit√© des donn√©es : Le SGBD permet de <b>r√©aliser des op√©rations</b> telles que la s√©lection de donn√©es, l'ajout de nouvelles donn√©es, la modification de donn√©es existantes et la suppression de donn√©es ;</li>
                        <li>les <b>acc√®s concurrents</b> (quand plusieurs personnes modifient en m√™me temps la base) ;</li>
                        <li>la s√©curit√© : Le SGBD s√©curise les acc√®s par la <b>gestion des autorisations</b> (en mode lecture/√©criture, et en parties) ;</li>
                        <li>le stockage / persistance : Le SGBD assure la maintenance des diff√©rentes copies de la base de donn√©es (en cas de panne d'un ordinateur). On parle de <b>persistance</b> des donn√©es.</li>
                    </ul> 
                </p>
                <p>Dans un SGDB <i>relationnel</i> (ou SGBDR), le logiciel veille aussi √† ce que les op√©rations sur les <b>relations respectent le sch√©ma relationnel</b> et g√®re g√©n√©ralement les op√©rations sous forme de transactions.</p>
                <dl>
                    <dt>Transaction</dt>
                    <dd>Une transaction est une op√©ration (ou un ensemble d'op√©rations) effectu√©e sur une base de donn√©es qui, par d√©finition, est : 
                        <ul>
                            <li><b>atomique</b> : elle est ex√©cut√©e dans son int√©gralit√© ou bien pas du tout, </li>
                            <li><b>coh√©rente</b> : elle respecte les contraintes de la base de donn√©es, </li>
                            <li><b>isol√©e</b> : elle ne doit pas affecter les autres transactions </li>
                            <li><b>durable</b> : elle est enregistr√©e sur un stockage persistant.</li>
                        </ul>
                    </dl>
                </dd> 

                <h3>Int√©gration des SGBD dans les syst√®mes d'informations</h3>
                <p>L'architecture d'un SGBD est g√©n√©ralement organis√©e en plusieurs niveaux ou couches pour permettre une gestion optimale des donn√©es. </p>
                <h4>Architecture 2-tiers</h4>
                </p>La premi√®re g√©n√©ration (dans les ann√©es 1980) √©tait bas√©e sur un mod√®le √† deux niveaux encore appel√© Client/Serveur mais aujourd'hui appel√© 2-<span title="tier se traduit par √©tage, niveau">tiers</span>. Cette approche donne une place centrale aux outils de bases de donn√©es, install√©s sur les postes clients. En d'autres termes, l'application cliente est fortement d√©pendante de la base de donn√©es. Par exemple, une modification de la structure de la base de donn√©es n√©cessite un red√©ploiement sur les postes clients.</p>
                <h4>Vers les mod√®les n-tiers</h4>
                <p>Avec l'augmentation de la taille des bases de donn√©es, du nombre de postes clients et de connexions simultan√©es et la diversification des clients (entreprises elles-m√™mes, mais aussi partenaires et clients) et plus tard avec la dispersion des donn√©es sur plusieurs serveurs, le mod√®le 2-tiers a montr√© ses limites, et la montr√©e en puissance des technologies r√©seaux a permis le d√©veloppement (dans les ann√©es 90) d'autres architectures plus adapt√©es aux enjeux actuels. </p>
                <p>L'architecture s'est modifi√©e en d√©pla√ßant le plus de t√¢ches possibles des logiciels clients vers les logiciels c√¥t√© serveur (<i>thin clients</i> versus <i title="A traduire par clients lourds, et non gros clients..">fat clients</i>). Plut√¥t que tout mettre c√¥t√© serveur, une couche interm√©diaire a √©t√© cr√©√© entre le client et la base de donn√©es, donnant ainsi une architecture 3-tiers. </p>
                <dl>
                    <dt><h4>Architecture 3-tiers</h4></dt>
                    <dd>
                        L'architecture √† 3-tier est, comme son nom l'indique, une architecture en 3 niveaux qui permettent de s√©parer :
                        <ul>
                            <li>La couche <b>pr√©sentation</b> : c'est l'IHM pour les usagers. </li>
                            <li>La couche <b>traitement</b> : c'est la partie qui analyse </li>
                            <li>La couche de <b> donn√©es</b> : c'est la partie stockage.
                            </li>
                        </ul>
                    </dd>
                    <dt>La couche pr√©sentation</dt>
                    <dd>
                        <ul>
                            <li>La couche pr√©sentation est le logiciel client qui <b>sert d'interface Homme-machine</b>. Elle s'occupe essentiellement <b>de l'affichage et de l'interaction</b>, bien qu'elle puisse effectuer quelques traitements basiques (p. ex., champs obligatoires, validation des donn√©es). </li>
                            <li>Cette couche <b>ne communique qu'avec la couche traitement</b> : elle envoie des <i>commandes-utilisateur</i> √† la couche traitement et re√ßoit des <i>r√©ponses</i> de la couche traitement.</li>
                        </ul>
                    </dd>
                    <p>Le logiciel de la couche pr√©sentation est g√©n√©ralement un <b>navigateur web</b>, mais cela peut √™tre un autre type d'application, graphique ou textuelle ; p. ex. distributeur de billets, console de jeu. </p>
                    <dt>La couche traitement</dt>
                    <dd>
                        <ul>
                            <li>La couche traitement impl√©mente la <b>logique m√©tier</b>, c'est-√†-dire qu'elle g√®re le traitement des requ√™tes selon certaines r√®gles, en effectuant des op√©rations telles que la validation des donn√©es, des calculs ou la gestion des flux. </li>
                            <li>Cette couche joue le r√¥le d'<b>interm√©diaire entre la (ou les) base(s) de donn√©es et les diff√©rents clients</b> : 
                                <ul>
                                    <li>Elle re√ßoit les commandes-utilisateur de la couche pr√©sentation, cr√©er √† partir de cela une requ√™te, puis envoie cette requ√™te √† la couche suivante, celle des donn√©es. </li>
                                    <li>Dans un second temps, elle recevra le ou les <i>r√©sultats de sa ou ses requ√™tes</i> de la couche acc√®s aux donn√©es, puis traduira ce r√©sultat en une <i>r√©ponse</i> adapt√©e client, pour enfin envoyer cette r√©ponse au client qui en a fait la demande.</li>
                                </ul> 
                            </li> 
                        </ul>
                    </dd> 
                    <dt>La couche de donn√©es</dt>
                    <dd>
                        <ul>
                            <li>La couche de donn√©es (ou couche d'acc√®s aux donn√©es) inclut un SGBD sur un serveur. Elle g√®re donc le stockage durable, l'acc√®s s√©curis√©, l'int√©grit√© des donn√©es, etc. </li>
                            <li>Cette couche re√ßoit les <i>requ√™tes</i> envoy√©es par la couche traitement, interroge la base de donn√©es, puis envoie le <i>r√©sultat</i> √† la couche traitement</li>
                        </ul>
                    </dd>
                </dl>
                <p>La tendance actuelle est √† l'<b>architecture n-tiers</b>. Dans ce type d'architecture, l'analyse des informations est elle-m√™me d√©compos√©e en plusieurs couches. Par exemple, si la couche de donn√©es est distribu√©e sur plusieurs serveurs, il peut √™tre int√©ressant d'avoir un middleware ou autre fournisseur de service pour s'occuper de faire le lien.</p>

                <h2 id="practice">Let's go !</h2> 

                <p>Les cellules suivantes sont connect√©es √† la base de donn√©es de la section de police "Meurtres et Myst√®res". Elles permettent d'ex√©cuter des requ√™tes SQL sur cette base. </p>
                <p> Tu peux ex√©cuter n'importe quelle requ√™te SQL dans n'importe quelle cellule, peu importe ce qu'il y avait au d√©part dans cette cellule.</p>

                <h3>Obtenir une vue globale de la base de donn√©es</h3>
                <p>En SQLite, la relation <code>sqlite_master</code> est un bon point d'entr√©e pour savoir √† quoi ressemble la base de donn√©es avec laquelle on doit travailler. Cette relation est pr√©sente dans n'importe quelle base de donn√©es g√©r√©e par SQLite. En effet, c'est SQLite qui la g√®re est s'en sert pour stocker diverses informations sur la structure de la base de donn√©es elle-m√™me. </p>
                <p>Cette relation contient notamment les noms (dans la colonne <code>tbl_name</code>) et les commandes <code>sql</code> qui ont permis de cr√©er les autres relations de la base.</p>
                <figure>
                    <table class="sqltable">
                        <tr>
                            <th colspan="2">sqlite_master</th>
                        </tr>
                        <tr>
                            <td>type</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>name</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>tbl_name</td>
                            <td>TEXT</td>
                        </tr>
                        <tr>
                            <td>rootpage</td>
                            <td>INTEGER</td>
                        </tr>
                        <tr>
                            <td>sql</td>
                            <td>TEXT</td>
                        </tr>
                    </table>
                    <figcaption>Diagramme de la relation particuli√®re "sqlite_master"</figcaption>
                </figure> 
                <sql-exercise data-question="La requ√™te ci-dessous renvoie toutes les commandes qui permettent de cr√©er les relations que contient la base de donn√©es." data-comment="Cette commande est sp√©cifique √† SQLite. Les autres bases de donn√©es ont leur syntaxe sp√©cifique." data-default-text="SELECT sql FROM sqlite_master WHERE type='table';"></sql-exercise> 

                Voici le diagramme entit√©-relation que l'on peut d√©duire de ces informations :
                <figure>
                    <a href="img/schema.png" target="_blank" id="diagram"><img src="img/schema.png"></a>
                    <figcaption>Diagramme entit√©-relation base de donn√©es de la police.</figcaption>
                </figure> 

                <sql-exercise data-question="Combien de personnes y a-t-il dans cette base de donn√©es ?" data-comment="Le nom de la table est ici 'individu', mais il peut √™tre remplac√© par n'importe quel autre nom de table de la base. Il suffit d'essayer !" data-default-text="SELECT COUNT(*) FROM individu;"></sql-exercise>

                <h3>Remarques g√©n√©rales sur le langage SQL</h3>
                <p>Les commandes SQL ne sont <b>pas <a href="https://fr.wikipedia.org/wiki/Sensibilit%C3%A9_%C3%A0_la_casse">sensibles √† la casse</a></b>.  Ainsi, la commande ci-dessus peut s'√©crire : <code>select sql from sqlite_master where type='table';</code><br>
                Toutefois, on pr√©f√®re √©crire :<br>
                <code>SELECT sql FROM sqlite_master WHERE type='table';</code><br>
                Cette fa√ßon de faire permet de mieux distinguer entre <b>les mots-clefs SQL sont en majuscules et les valeurs des variables en minuscules</b>. 
                <p>Dans tous les cas, les valeurs de type caract√®re ou cha√Ænes de caract√®res doivent √™tre √©crites en <b>respectant la casse</b>. Pour cette raison, <code>SELECT name FROM sqlite_master WHERE type = '<u>T</u>able';</code> ne renverra rien.</p>
                <p>Une commande SQL peut √©galement √™tre r√©alis√©e <b>sur plusieurs lignes</b> pour une meilleure lisibilit√©. Ainsi, la commande ci-dessus peut s'√©crire :<br>
                <code>SELECT sql <br>FROM sqlite_master <br>WHERE type='table';</code></p>
                <p>La plupart des <abbr title="Syst√®mes de Gestion de Bases de Donn√©es">SGBD</abbr> exigent de <b>terminer une requ√™te par un point-virgule (';')</b>, m√™me si le syst√®me utilis√© par cette page Web est plus indulgent.</p>

                <h3>Quelques commandes</h3>

                <h4>Connaitre tous les <a href="#attribut">attributs</a> d'une relation</h4>
                <sql-exercise data-question="L'instruction ci-dessous renvoie les donn√©es de tous les attributs pour 1 enregistrement de la relation individu. Elle affiche aussi les noms des attributs en ent√™te des colonnes." data-comment="Pour connaitre les attributs d'une relation, il suffit de mettre le signe * apr√®s le mot-clef SELECT. L'ajout en fin de requ√™te de LIMIT 1 permet de n'afficher que le premier enregistrement. To limit signifie ¬´ limiter ¬ª."
                    data-default-text="SELECT * FROM individu LIMIT 1;"></sql-exercise>
                <p>Tu peux essayer avec d'autres relations et avec d'autres quantit√©s d'enregistrements.</p>
                <p id="#limit">La clause <code>LIMIT</code> (ou parfois TOP) doit √™tre plac√©e <u>√† la toute fin de la requ√™te</u></p>
                <p>Pour afficher enti√®rement une relation, c'est la m√™me commande, mais sans la clause LIMIT. </p>

                <h4>Connaitre <a href="#cardinalite" title="le nombre d'enregistrements qu'il y a dans">la cardinalit√©</a> d'une relation</h4>
                <sql-exercise data-question="L'instruction ci-dessous renvoie le nombre d'enregistrements qu'il y a dans la relation individu" data-comment="On utilise la fonction COUNT. To count signifie ¬´ compter ¬ª."
                    data-default-text="SELECT COUNT(*) FROM individu;"></sql-exercise>

                <h4>Afficher les valeurs de certains attributs seulement</h4>
                <sql-exercise data-question="L'instruction ci-dessous renvoie les donn√©es pour les attributs nom_complet et nom_rue de 5 enregistrements de la relation individu (au lieu d'afficher toutes les colonnes)." data-comment=""
                    data-default-text="SELECT nom_complet, nom_rue FROM individu LIMIT 5;"></sql-exercise>                
                <p>Tu peux essayer avec d'autres attributs et d'autres relations. </p>

                <h4>Connaitre toutes les valeurs possibles d'un attribut</h4>
                <p>Lorsqu'on travaille avec des donn√©es, il est toujours int√©ressant de v√©rifier les valeurs utilis√©es pour certains attributs, notamment ceux qui repr√©sentent une cat√©gorie. </p>
                <sql-exercise data-question="L'instruction ci-dessous renvoie toutes les donn√©es diff√©rentes qu'on peut trouver dans la colonne nom_rue de la relation individu" data-comment="Certains enregistrements ont le m√™me nom de rue. Sans le mot-clef DISTINCT, le nom de rue sera r√©p√©t√©. Avec le mot-clef DISTINCT, il n'y aura pas de r√©p√©tition."
                    data-default-text="SELECT DISTINCT nom_rue FROM individu;"></sql-exercise>
                <p>Tu peux essayer avec l'attribut type de relation rapport ? </p>

                <h3>Anatomie d'une requ√™te SQL</h3>
                <p>Une requ√™te SQL peut contenir des √©l√©ments vari√©s :
                    <ul>
                        <li>Les <a href="#keywords">mots-clefs SQL</a> (p. ex., <code>‚ÄãSELECT</code>‚Äã, <code>‚ÄãFROM</code>‚Äã)</li>
                        <li>Des noms d'attributs (p. ex., nom_complet, nom_rue)</li>
                        <li>Des noms de relations (p. ex., ‚Äãindividu, rapport)</li>
                        <li>Des <a href="#regex">caract√®res g√©n√©riques</a> (p. ex., ‚Äã<code>%</code>)</li>
                        <li>Des <a href="#agregation">fonctions</a> (p. ex., ‚Äã<code>COUNT</code>)</li>
                        <li>etc</li>
                    </ul>
                </p> 
                 
                <h3 id='keywords'>Mots-clefs des principales op√©rations sur les relations</h3>
                <dl>
                    <dt>SELECT ... FROM</dt>
                    <dd>permet de <b>lire</b> des donn√©es.</dd>
                       <code>SELECT</code> commande la <b>r√©cup√©ration</b> des donn√©es : 
                        <ul>
                            <li>
                                dans toutes les colonnes avec <code>SELECT *</code>
                            </li>
                            <li>
                                dans une colonne sp√©cifique <code>SELECT <i title="√Ä remplacer par un vrai nom de colonne">colonne</i></code>
                            </li>
                            <li>
                                dans plusieurs colonnes sp√©cifiques <code>SELECT <i title="√Ä remplacer par un vrai nom de colonne">colonneA</i>, <i title="√Ä remplacer par un vrai nom de colonne">colonneB</i></code>
                            </li>
                        </ul> 
                        <code>FROM</code> <b>indique la relation</b> (ou les relations) dans laquelle il faut aller chercher les donn√©es. 
                        <p>Comme avec les attributs, il est possible d'utiliser la virgule (,)pour indiquer plusieurs noms de tables. Toutefois, le r√©sultat peut s'av√©rer surprenant et ind√©sirable lorsqu'on d√©bute. S'il est n√©cessaire de manipuler des donn√©es r√©parties dans plusieurs relations, on pr√©f√©rera diviser le travail en plusieurs requ√™tes ou utiliser JOIN. </p> 
                    <dt>INSERT INTO</dt>
                    <dd>permet d'<b>ajouter</b> un nouvel enregistrement √† une relation.</dd>
                    <dt>UPDATE</dt>
                    <dd>permet de <b>modifier</b> les valeurs d'enregistrements existants d√©j√† dans une relation.</dd>
                    <dt>DELETE</dt>
                    <dd>permet de <b>supprimer</b> des enregistrements d'une relation.</dd>
                </dl>   

                <h3 id='keywords'>Filtrer les r√©sultats selon les valeurs</h3>
                <dl>
                <dt>WHERE</dt>
                <dd>‚ÄãWHERE‚Äã permet de <b>filtrer les enregistrements en fonction de valeurs particuli√®res</b>.</dd>
                <p>‚ÄãLa clause WHERE‚Äã s'ajoute <u>apr√®s</u> le couple SELECT-FROM. </p>
                <p>Faisons quelques essais.</p>
                <sql-exercise data-question="Voici une requ√™te pour tout savoir sur une personne sp√©cifique √† partir de son nom complet. " data-comment="Il faut d√©limiter les valeurs de type cha√Æne de caract√®res avec des guillemets ('). " data-default-text="SELECT * FROM individu WHERE nom_complet = 'Kinsey Erickson';"></sql-exercise>
                
                <p>Il existe plusieurs outils pour pr√©ciser la condition que les valeurs des attributs doivent respecter. En voici quelques-uns.</p>
                <h4>Les op√©rateurs de comparaison</h4>
                <p>Ci-dessous <code><i>attribut</i></code> d√©signe le nom de l'attribut (p. ex., nom_complet), et <code><i>val</i></code> d√©signe une valeur particuli√®re (p. ex., "Kinsey Erickson").</p>
                <ul> 
                    <li><code><i>attribut</i> = <i>val</i></code> : la valeur de l'attribut doit √™tre <b>√©gale √†</b> val. </li>
                    <li><code><i>attribut</i> <> <i>val</i></code> : la valeur de l'attribut doit √™tre <b>diff√©rente de</b> val. </li>
                    <li><code><i>attribut</i> &lt; <i>val</i></code> : la valeur de l'attribut doit √™tre <b>strictement inf√©rieure √†</b> val. </li>
                    <li><code><i>attribut</i> &lt;= <i>val</i></code> : la valeur de l'attribut doit √™tre <b>inf√©rieure ou √©gale √†</b> val.</li>
                    <li>Il y a aussi <code>&gt;</code> et <code>&gt;=</code>. </li>
                </dl>
                <p><code><i>attribut</i> = <i>val</i></code> (par exemple) forme une <b>condition</b>.</p>
                <h4>Les op√©rateurs logiques</h4>
                <p>AND et OR permettent de combiner plusieurs crit√®res/conditions en une seule.</p>
                <ul>
                    <li><code>‚ÄãAND‚Äã</code> permet d'obtenir les enregistrements qui r√©pondent √† <b>plusieurs conditions</b> (√† chacune des conditions, sans exception).<br>
                    Par exemple <code><i>conditionA</i> AND <i>conditionB</i> AND <i>conditionC</i></code> permet d'obtenir les enregistrements qui r√©pondent √† ces 3 conditions. </li>
                    <li><code>OR</code> permet d'obtenir les enregistrements qui r√©pondent √† <b>au moins l'une des conditions</b>.<br>
                    Par exemple <code><i>conditionA</i> OR <i>conditionB</i> OR <i>conditionC</i></code> permet d'obtenir les enregistrements qui r√©pondent √† au moins l'une de ces 3 conditions. </li>
                    <li><code>NOT</code> permet de prendre le <b>contraire d'un crit√®re/condition</b>.<br>
                    Par exemple <code>NOT(<i>conditionA</i>)</code> permet d'obtenir les enregistrements qui ne r√©pondent pas √† la conditionB. </li>
                </ul> 
                <p>Le plus simple est d'essayer.</p>
                <sql-exercise data-question="Voici une requ√™te qui renvoie toutes les donn√©es de tous les enregistrements de la table rapport qui ont √† la fois la valeur 'vol de bien' dans la colonne type et 'Chicago' dans la colonne ville." data-comment="Les valeurs indiqu√©es doivent exister dans la base. Essaie de remplacer 'Chicago' par 'chicago' et d'ex√©cuter l'instruction. Modifie cette requ√™te SQL pour trouver le premier indice. Rappel : Le meurtre a eu lieu le 15 janvier 2018‚Äã √† ‚ÄãSQL City‚Äã. On veut seulement la description. "
                    data-default-text="SELECT * FROM rapport 
WHERE type = 'vol de bien' 
AND ville = 'Chicago';" data-solution="SELECT description FROM rapport 
WHERE type = 'meurtre' 
AND ville = 'SQL City'
AND date = 20180115;"></sql-exercise>
                <p>Si tu as compris la requ√™te √† ex√©cuter, elle devrait afficher le rapport de la sc√®ne du crime, alors f√©licitations. </p>
                <p>Sinon, tu peux continuer √† chercher, ou cliquer sur ¬´ Afficher la solution ¬ª. Il faudra juste supprimer le <code>/*</code> initial avant d'ex√©cuter la requ√™te. </p>  

                <p>Lorsqu'on ne sait pas comment les cha√Ænes de caract√®res sont stock√©es dans la base de donn√©es, on peut utiliser les fonctions <code>UPPER()</code> et <code>LOWER()</code>.</p>

                <sql-exercise data-question="Essaie les fonctions UPPER() et LOWER() pour comprendre comment elles fonctionnent." data-comment="" data-default-text="SELECT DISTINCT ville FROM rapport WHERE LOWER(ville) ='sql city';"></sql-exercise>

                <h3 id="agregation">Fonctions d'agr√©gation</h3>
                <p>Pour r√©pondre √† certaines questions, telles que ¬´ Qui est la personne la plus riche ? ¬ª ou ¬´ Qui est la personne la plus jeune ? ¬ª, les op√©rateurs de comparaison ne suffisent pas, mais les <b>fonctions d'agr√©gation</b> sont l√† pour nous aider. La fonction  <code>COUNT</code> vue pr√©c√©demment est une fonction d'agr√©gation. Agr√©ger, c'est rassembler en un tout. Il y en a d'autres : </p>
                <code>MAX(<i title="√Ä remplacer par un vrai nom d'attribut">attribut</i>)</code><dd> trouve la plus grande des valeurs de l'attribut indiqu√©.</dd>
                <code>MIN(<i title="√Ä remplacer par un vrai nom d'attribut">attribut</i>)</code><dd>trouve la plus petite des valeurs de l'attribut indiqu√©.</dd>
                <code>SUM(<i title="√Ä remplacer par un vrai nom d'attribut">attribut</i>)</code><dd>calcule la somme de valeurs de l'attribut indiqu√©.</dd>
                <code>AVG(<i title="√Ä remplacer par un vrai nom d'attribut">attribut</i>)</code><dd>calcule la moyenne de valeurs de l'attribut indiqu√©.</dd>
                <code>COUNT‚Äã(<i title="√Ä remplacer par un vrai nom d'attribut">attribut</i>)</code><dd>compte le nombre de valeurs de l'attribut indiqu√©.</dd>
          
                <sql-exercise data-question="La requ√™te ci-dessous permet d'obtenir le plus vieux titulaire de permis de conduire." data-comment="" data-default-text="SELECT MAX(age) FROM permis_auto;"></sql-exercise>

                <h3>Trier les r√©sultats</h3>
                <p>Il existe une autre fa√ßon de trouver les valeurs minimales et maximales, tout en affichant davantage de donn√©es. En effet, on peut contr√¥ler l'ordre de tri des r√©sultats obtenus, en ajoutant la clause <code>ORDER BY(<i title="√Ä remplacer par un vrai nom d'attribut">attribut</i>)</code> <u>entre la clause WHERE et la clause LIMIT</u>. </p>
                <sql-exercise data-question="La requ√™te ci-dessous permet d'obtenir toutes les donn√©es de la relation permis_auto, mais en les classant selon l'√¢ge du titulaire et en donnant les 10 premiers enregistrements. " data-comment="On peut supprimer ASC qui indique l'ordre croissant, qui est l'ordre par d√©faut. On peut aussi le remplacer par DESC pour indiquer un ordre d√©croissant. Tu peux aussi essayer de trier sur d'autres colonnes pour voir le r√©sultat." data-default-text="SELECT * FROM permis_auto ORDER BY age ASC LIMIT 10;"></sql-exercise>
                <p>√Ä pr√©sent, tu connais suffisamment SQL pour identifier le premier t√©moin. Essaie !</p>
                <sql-exercise data-question="√âcrire une requ√™te qui permet d'identifier le premier t√©moin. " data-comment="Il existe plusieurs fa√ßons de le faire, c'est pourquoi il peut y avoir marqu√© Incorrect m√™me avec requ√™te qui permet d'obtenir la r√©ponse." data-default-text="


" data-solution="SELECT * FROM individu 
WHERE nom_rue = 'Northwestern Dr' 
ORDER BY numero_rue DESC LIMIT 1;"></sql-exercise>
                <p><b>Remarque. On peut trier selon plusieurs colonnes. </b></p> 
                <sql-exercise data-question="Cette requ√™te permet d'obtenir les enregistrements de la relation membre_gymfit, tri√©s en fonction de leur 'carte_membre' et de leur 'nom_complet'." data-comment="Les r√©sultats seront principalement tri√©s selon la carte, et √† l'int√©rieur de chaque groupement par carte, ils sont tri√©s par ordre alphab√©tique des noms." data-default-text="SELECT * FROM membre_gymfit ORDER BY carte_membre, nom_complet;"></sql-exercise>

                <h3 id='wildcards'>Obtenir des informations √† partir de donn√©es partielles</h3>

                <p>Parfois, on n'a pas une valeur constante compl√®te, mais seulement des donn√©es partielles. Par exemple, comment faire pour chercher toutes les personnes dont le nom commence par le caract√®re C ?</p>
                <p>Dans ce cas, de nombreux langages, SQL Pour cela, on utilise les <b>expressions r√©guli√®res</b>. 
                <dl>
                    <dt id="regex">Expression r√©guli√®re</dt>
                    <dd>Une expression r√©guli√®re est un <b>mod√®le de texte</b>. C'est une cha√Æne de caract√®res qui combine des caract√®res standard et des caract√®res g√©n√©riques pour d√©crire un mod√®le de cha√Ænes de caract√®res possibles. </dd>
                    <dt>Caract√®re g√©n√©rique</dt>
                    <dd>Un caract√®re g√©n√©rique (<i>wildcards</i> en anglais) est un symbole sp√©cial utilis√© pour repr√©senter des caract√®res inconnus. </dd>
                </dl>
                <p>Comme de nombreux autres langages, SQL permet d'utiliser des expressions r√©guli√®res.</p>
                <p>Le caract√®re g√©n√©rique le plus courant est <code>%</code>. </p>
                <sql-exercise data-question="Voici une requ√™te qui permet d'obtenir les enregistrements pour lesquels la valeur correspondant √† l'attribut nom commence par 'Cha'." data-comment="Le signe = est remplac√© par le mot-clef LIKE, qu'on peut traduire ici par ¬´ comme ¬ª" data-default-text="SELECT * FROM individu WHERE nom_complet LIKE 'Cha%';"></sql-exercise>
                <sql-exercise data-question="Voici une requ√™te qui permet d'obtenir les enregistrements de la relation individu pour lesquels la valeur correspondant √† l'attribut nom_complet commence par 'Cha' et termine par 'e'." data-comment="Le caract√®re g√©n√©rique % remplace n'importe quels caract√®res, en n'importe quelle quantit√©. Trouveras-tu la commande pour afficher les enregistrements de individu pour lesquels la valeur nom_complet contient 'bob' ?" data-default-text="SELECT * FROM individu WHERE nom_complet LIKE 'Cha%e';"></sql-exercise>
                <p>La sensibilit√© √† la casse lors de l'utilisation de l'op√©rateur LIKE  d√©pend de la configuration de la base de donn√©es <span title="Cela d√©pend de la collation, qui est un ensemble de r√®gles qui d√©termine comment les caract√®res doivent √™tre tri√©s et compar√©s.">üõà</span>. </p>
                <p>L'autre caract√®re g√©n√©rique pris en charge par SQL est <code>_</code>.</p>
                <p>L'expression r√©guli√®re <code>"B_b"</code> correspondrait par exemple √† "Bab", "Bbb", "Bcb", "B1b", "Bob", mais pas √† "Babe" ni √† "Bb".</p> 
                <dl>
                    <dt>LIKE</dt>
                    <dd><code>LIKE</code> permet de comparer une cha√Æne de caract√®res avec un mod√®le de texte en utilisant des caract√®res g√©n√©riques.</dd>
                </dl>
                <sql-exercise data-question="Voici une requ√™te qui permet d'obtenir les diff√©rentes valeurs de l'attribut ville (avec SELECT DISTINCT ville) de la relation rapport (FROM rapport) pour les enregistrements pour lesquels la valeur correspondant √† l'attribut ville est commence par 'Irvin' et contient 6 caract√®res." data-comment="Teste quelques variantes telles que 'Irvin_', 'B_b%'. Trouveras-tu la commande pour afficher les noms de villes de 4 caract√®res et qui terminent par un 'o' ?" data-default-text="SELECT DISTINCT ville 
FROM rapport 
WHERE ville LIKE 'Irvin_';"></sql-exercise>
                <p>Lorsqu'on ne sait pas comment les cha√Ænes de caract√®res sont stock√©es dans la base de donn√©es, on peut utiliser les fonctions <code>UPPER()</code> et <code>LOWER()</code>, par exemple avec <code>SELECT * FROM rapport WHERE UPPER(ville) LIKE UPPER('Irvin_');</code></p>
                <sql-exercise data-question="√âcrire une requ√™te qui permet d'identifier le second t√©moin. " data-comment="Il existe plusieurs fa√ßons de le faire, c'est pourquoi il peut y avoir marqu√© Incorrect m√™me avec requ√™te qui permet d'obtenir la r√©ponse." data-default-text="


                " data-solution="SELECT * FROM individu 
                WHERE nom_complet LIKE '%Annabel%'
                AND nom_rue = 'Franklin Ave';"></sql-exercise>
                <dl>
                    <dt>BETWEEN</dt>
                    <dd><code>BETWEEN</code> permet de v√©rifier si une valeur se situe dans une plage donn√©e. </dd>
                </dl>
                <p>Voici un exemple d'utilisation  :
                <sql-exercise data-question="Cette requ√™te qui permet d'obtenir les enregistrements de la relation permis_auto pour lesquels la valeur correspondant √† l'attribut age est comprise entre 20 et 30." data-comment="Between signifie ¬´ entre ¬ª. Les personnes √¢g√©es de 20 ou 30 ans tout pile sont incluses. " data-default-text="SELECT * FROM permis_auto WHERE age BETWEEN 20 AND 30;"></sql-exercise> 
                <sql-exercise data-question="Voici un autre exemple qui montre que BETWEEN prend en charge les expressions r√©guli√®res." data-comment="" data-default-text="SELECT DISTINCT ville 
FROM rapport 
WHERE ville BETWEEN 'W%' AND 'Z%';"></sql-exercise>
                    
            </div>
        </div>

        <div id="joins">
            <div class="grid-item">
                <h2>Faire des liens entre les relations</h2>
                <p>Jusqu'√† pr√©sent, nous avons pos√© des questions auxquelles il est possible de r√©pondre en consid√©rant les donn√©es d'une seule relation. Mais que se passe-t-il si nous besoin d'utiliser simultan√©ment des donn√©es provenant de plusieurs relations ? </p>
                <p>Lorsqu'on a besoin d'utiliser simultan√©ment des donn√©es provenant de plusieurs relations, on utilise <code>JOIN</code>.</p>
                <p>Les utilisateurs SQL exp√©riment√©s utilisent diff√©rents types de jointures telles que <code>INNER JOIN</code>, <code>OUTER JOIN</code>, <code>LEFT JOIN</code> ou <code>RIGHT JOIN</code>. Le plus courant est <code>INNER JOIN</code> (ou juste <code>JOIN</code>).</p>
                <p>Les mot-clefs de la clause √† retenir est <code>JOIN .. ON</code>.</p>
                <p>La mani√®re la plus courante de joindre des relations consiste √† faire correspondre la clef primaire de la premi√®re relation avec la clef √©trang√®re de la seconde relation ; le cas s'y pr√™te g√©n√©ralement.</p>
                <p>Voici un lien vers le <a href="#diagram">diagramme entit√©-relation</a> de la base de donn√©es de la police si besoin. </p>
                <sql-exercise data-question="Cette requ√™te permet d'obtenir les noms de la relation 'individu' et les salaires annuels de la relation 'revenu', en faisant correspondre les valeurs des attributs nir pr√©sent dans ces deux relations. " data-comment="Modifie la requ√™te pour renvoyer plus de donn√©es ou pour rechercher des personnes ayant des revenus sup√©rieurs √† une certaine valeur. Tu peux aussi utiliser SELECT * FROM comme pour n'importe quelle autre requ√™te. Pourras-tu faire un JOIN avec d'autres tables ?"
                    data-default-text="SELECT individu.nom_complet, revenu.revenu_annuel 
FROM revenu 
JOIN individu 
ON revenu.nir = individu.nir 
LIMIT 10;"></sql-exercise>
                <p>Le mot-clef <code>ON</code> est tr√®s important. Essaie de la supprimer pour comprendre comment fonctionne <code>INNER JOIN</code>... (mets un <code>LIMIT</code> √† 50 pour ne pas avoir trop de r√©sultats).</p>
                <p>Selon les besoins, on peut joindre autant de relations dans une m√™me requ√™te.</p>
                <sql-exercise data-question="Voyons si les personnes qui ont des salaires importants ont d'autres caract√©ristiques en commun." data-comment="Cet exemple montre comment joindre 3 relations : revenu, individu et permis_auto. Accessoirement, cet exemple montre comment utiliser des ¬´ alias ¬ª, avec le mot-clef AS, pour les noms des relations et pour les noms des attributs de diff√©rentes tables. C'est un outil pratique." data-default-text="SELECT nom_complet AS Nom, revenu_annuel AS 'Revenu annuel', sexe AS Sexe, couleur_cheveux AS 'Cheveux (couleur)'
FROM revenu AS r
JOIN individu AS i
ON r.nir = i.nir 
JOIN permis_auto AS p
ON permis_id = p.id
WHERE revenu_annuel > 450000;"></sql-exercise>


                <p>Maintenant que tu sais comment joindre des relations, tu dois √™tre en mesure de trouver les transcriptions d'entretiens pour les deux t√©moins que tu as identifi√©s plus t√¥t !</p>

                <sql-exercise data-question="Trouve les entretiens !" data-comment="La solution attendue utilise une seule requ√™te pour obtenir les deux entretiens, mais il existe d'autres fa√ßons de proc√©der. Techniquement, le JOIN n'est pas obligatoire pour obtenir les transcriptions, mais c'est l'occasion de tester ce mot-clef."
                    data-default-text="


" data-solution="SELECT *
FROM individu JOIN entretien
ON individu.id = entretien.individu_id
WHERE individu.id = 14887 OR individu.id = 16371;"></sql-exercise>
            </div>
        </div>

        <div class="grid-item">
            <h3>Tu vas trouver !</h3>
            <p>Tu connais maintenant suffisamment de SQL pour lever le myst√®re. Le <a href="#diagram">diagramme entit√©-relation</a> est crucial pour faire des hypoth√®ses cr√©dibles et des requ√™tes correctes. </p>
            <sql-exercise data-question="Trouve le meurtrier !" data-comment="Il faudra plus d'une requ√™te pour trouver le tueur. Tu peux simplement modifier cette case, en  notant tes r√©sultats en cours. Lorsque tu penses avoir trouv√©, rends-toi √† la section suivante."
                data-default-text="


"></sql-exercise>

        </div>

        <div class="grid-item">
            <h3>V√©rifie ta solution üëá</h3>
            <sql-exercise data-question="As-tu trouv√© le meurtrier ?" data-comment="" data-default-text="INSERT INTO solution VALUES (1, 'Ins√®re ici le nom complet de la personne trouv√©e.'); 
SELECT value FROM solution;"></sql-exercise>
        </div>
    </main>

    <footer>
        <h3>Cr√©dits</h3>
        <p>"Meurtre et myst√®re √† SQL City" est une adaptation fran√ßaise de l'≈ìuvre <a href="https://mystery.knightlab.com/" target="_blank">"SQL Murder Mystery"</a>.</p>
        <p>Traduction de la base de donn√©e automatis√©e gr√¢ce aux API <a href="https://docs.python.org/fr/3/library/sqlite3.html" target="_blank">sqlite3</a>, <a href="https://github.com/psf/requests" target="_blank">requests</a>, <a href="https://pypi.org/project/beautifulsoup4/"  target="_blank">bs4</a> et <a href="https://pypi.org/project/googletrans2/" target="_blank">googletrans</a> pour Python + quelques modifications manuelles. </p>
        <p>Illustration du tableau d'indices de <a href="https://fr.vecteezy.com/membres/klyaksun" target="_blank">Yuliya Pauliukevich</a> t√©l√©charg√©e gratuitement sur <a href="https://www.vecteezy.com/" target="_blank">Vectors by Vecteezy</a></p>
        <br>
        <p><b>"SQL Murder Mystery" :</b></p>
        <p>Le site original "SQL Murder Mystery" a √©t√© cr√©√© par <a href="https://twitter.com/joonparkmusic" target="_blank">Joon Park</a> et <a href="https://twitter.com/Cathy_MeiyingHe" target="_blank">Cathy He</a> alors qu'ils √©taient au Knight Lab et adapt√©, et mis en production pour le web par <a href="https://twitter.com/joegermuska" target="_blank">Joe Germuska</a>. Voir le <a href="https://github.com/NUKnightLab/sql-mysteries" target="_blank">GitHub repository</a> pour plus d'informations.</p>
        <p>Le <a href="https://knightlab.northwestern.edu/" title="Knight Lab | Faire progresser l'innovation dans les m√©dias d'information par l'exploration et l'exp√©rimentation." target="_blank">Knight Lab</a> est rattach√© √† <a title="Northwestern University" href="http://www.northwestern.edu/" target="_blank">University Northwestern</a> (situ√©e aux √âtats-Unis). Il rassemble une √©quipe de technologues et de journalistes qui travaillent √† faire progresser l'innovation dans les m√©dias de l'information par l'exploration et l'exp√©rimentation. Pour voir quelques projets d√©velopp√©s par le Knight Lab, c'est par <a href="https://knightlab.northwestern.edu/projects/" target="_blank">ici.</a></p>
        <p>L'√©nigme s'inspire d'<a href="https://github.com/veltman/clmystery" target="_blank">un crime survenu √† de Terminal City...</a></p>
        <p>Le SQL bas√© sur le Web est rendu possible gr√¢ce √† <a href="https://github.com/sql-js/sql.js/" target="_blank">SQL.js</a></p>
        <p>Les composants Web personnalis√©s pour effectuer les requ√™tes SQL ont √©t√© cr√©√©s et mis dans le domaine public par Zi Chong Kao, cr√©ateur de <a href="https://selectstarsql.com/" target="_blank">Select Star SQL.</a></p>
        <br>
        <p>Le code original est publi√© sous la <a href="https://github.com/habored/mystere-sql/blob/master/LICENSE" target="_blank">licence MIT</a></p>
        <p>Le texte original et les autres contenus sont publi√©s sous <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.fr" target="_blank">Creative Commons CC BY-SA 4.0</a></p>
    </footer>
</body>
</html>
